<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Trivia Data Visualization</title>
    <script>
      (function () {
        const STORAGE_KEY = "trivia-theme";
        const DEFAULT_THEME = "system";

        const getStoredTheme = () => {
          try {
            return localStorage.getItem(STORAGE_KEY) ?? DEFAULT_THEME;
          } catch {
            return DEFAULT_THEME;
          }
        };

        const prefersDark = () =>
          window.matchMedia("(prefers-color-scheme: dark)").matches;

        const resolveTheme = (value) =>
          value === "system" ? (prefersDark() ? "dark" : "light") : value;

        const applyTheme = (value) => {
          const resolved = resolveTheme(value);
          const root = document.documentElement;
          root.dataset.theme = value;
          root.classList.toggle("dark", resolved === "dark");
          root.style.colorScheme = resolved;
        };

        applyTheme(getStoredTheme());
      })();
    </script>
    <link rel="stylesheet" href="/src/index.css" />
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="src/main.tsx"></script>
  </body>
</html>
